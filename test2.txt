apiVersion: v1
kind: ResourceQuota
metadata:
  name: {{ include "resourceQuota.name" . }}
  namespace: {{ include "namespace.name" . }}
  annotations:
    argocd.argoproj.io/sync-wave: "-3"
  labels:
    onboarding.verizon.io/tshirt-size: {{ include "labels.tshirt" . }}
spec:
  hard: {{ include "global.resourcequota" . }}
  scopes:
  - NotTerminating
---
$ ./helm.exe template dev-chart --dry-run -f dev-values.yaml --output-dir ./output/tampa/rat/cat/dev './' --set vsad=rat --set env=dev --set appId=cat --set serviceAccount.name=abcd --set tshirt=s --set greenfield=false --set datacenter=tampa --set datacenter_shortname=tpa --set datacenter_url=api.tpa.com --set "rolebindings.admin.subjects.name={GIJV_ERP_DBA_ADMINS,ADEBP_GIJV_ERP_DBA_ADMINS}" --set "rolebindings.dev.subjects.name={GIJV_Prod_Admins,ADEBP_GIJV_Prod_Admins}" --set uuid=1234 --set serviceAccountSecretNS=abcd --set "labels={onboarding.verizon.io/lob: CSG,onboarding.verizon.io/vast: '24204'}" --set "annotations={onboarding.verizon.io/support-poc: erpdbainfrastructure@verizonwireless.com}"
Error: template: onboarding-pipeline/templates/resourcequota.yaml:11:11: executing "onboarding-pipeline/templates/resourcequota.yaml" at <include "global.resourcequota" .>: error calling include: template: no template "global.resourcequota" associated with template "gotpl"

Use --debug flag to render out invalid YAML
---
vsad: vsad
appId: app
env: dev

datacenter: tampa
datacenter_shortname: TPA
datacenter_url: www

labels: {}
annotations: {}
uuid: abc1234
serviceAccountSecretNS: argoappofapps

namespace:
  description: "description of namespace"
#  displayName: displayName


serviceAccount:
  create: true
  name: serviceAccountName

tshirt: 
greenfield: false

small:
  resourceQuota:
    hard:
      requests:
        cpu: 1
        memory: 0.0100Gi
      limits:
        cpu: 1
        memory: 0.0100Gi
  limitRange:
    container:
      max:
        cpu: 1
        memory: 0.0100Gi
      min:
        cpu: .000015622
        memory: .00004Gi
      default:
        cpu: .6983
        memory: 0.0100Gi
      defaultRequest:
        cpu: .25
        memory: .0025Gi 
    pod:
      max:
        cpu: 1
        memory: .0100Gi
      min:
        cpu: .000015622
        memory: .00004Gi
      default:
        cpu: 0.6983
        memory: 0.0100Gi
      defaultRequest:
        cpu: .25
        memory: .0025Gi

medium:
  resourceQuota:
    hard:
      requests:
        cpu: 1
        memory: 0.3600Gi
      limits:
        cpu: 1
        memory: 0.3600Gi
  limitRange:
    container:
      max:
        cpu: 1
        memory: 0.3600Gi
      min:
        cpu: .000015622
        memory: .00004Gi
      default:
        cpu: .6983
        memory: 0.0100Gi
      defaultRequest:
        cpu: .25
        memory: .0025Gi 
    pod:
      max:
        cpu: 1
        memory: 0.3600Gi
      min:
        cpu: .000015622
        memory: .00004Gi
      default:
        cpu: 0.6983
        memory: 0.0100Gi
      defaultRequest:
        cpu: .25
        memory: .0025Gi

large:
  resourceQuota:
    hard:
      requests:
        cpu: 1
        memory: 0.6200Gi
      limits:
        cpu: 1
        memory: 0.6200Gi
  limitRange:
    container:
      max:
        cpu: 1
        memory: 0.6200Gi
      min:
        cpu: .000015622
        memory: .00004Gi
      default:
        cpu: .6983
        memory: 0.0100Gi
      defaultRequest:
        cpu: .25
        memory: .0025Gi 
    pod:
      max:
        cpu: 1
        memory: 0.6200Gi
      min:
        cpu: .000015622
        memory: .00004Gi
      default:
        cpu: 0.6983
        memory: 0.0100Gi
      defaultRequest:
        cpu: .25
        memory: .0025Gi

xLarge:
  resourceQuota:
    hard:
      requests:
        cpu: 3
        memory: 2.1800Gi
      limits:
        cpu: 3
        memory: 2.1800Gi
  limitRange:
    container:
      max:
        cpu: 3
        memory: 2.1800Gi
      min:
        cpu: .000015622
        memory: .00004Gi
      default:
        cpu: .6983
        memory: 0.0100Gi
      defaultRequest:
        cpu: .25
        memory: .0025Gi 
    pod:
      max:
        cpu: 3
        memory: 2.1800Gi
      min:
        cpu: .000015622
        memory: .00004Gi
      default:
        cpu: 0.6983
        memory: 0.0100Gi
      defaultRequest:
        cpu: .25
        memory: .0025Gi

xxLarge:
  resourceQuota:
    hard:
      requests:
        cpu: 15
        memory: 32.7500Gi
      limits:
        cpu: 15
        memory: 32.7500Gi
  limitRange:
    container:
      max:
        cpu: 15
        memory: 32.7500Gi
      min:
        cpu: .000015622
        memory: .00004Gi
      default:
        cpu: .6983
        memory: 0.0100Gi
      defaultRequest:
        cpu: .25
        memory: .0025Gi 
    pod:
      max:
        cpu: 15
        memory: 32.7500Gi
      min:
        cpu: .000015622
        memory: .00004Gi
      default:
        cpu: 0.6983
        memory: 0.0100Gi
      defaultRequest:
        cpu: .25
        memory: .0025Gi

rolebindings:
  admin:
    subjects:
      name:
      - FILLTHISIN_{{ .Values.vsad }}_ADMIN

  dev:
    subjects:
      name:
      - FILLTHISIN_{{ .Values.vsad }}_VIEW
      
global:
  resourcequota:
    limits:
      cpu: 10m
      memory: 500Gi
    requests:
      cpu: 5m
      memory: 250Gi
